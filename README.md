# 키친포스

## 요구 사항

### 상품

* 상품을 등록할 수 있다.
* 상품의 가격이 올바르지 않으면 등록할 수 없다.
    * 상품의 가격은 0 원 이상이어야 한다.
* 상품의 목록을 조회할 수 있다.

### 메뉴 그룹

* 메뉴 그룹을 등록할 수 있다.
* 메뉴 그룹의 목록을 조회할 수 있다.

### 메뉴

* 1 개 이상의 등록된 상품으로 메뉴를 등록할 수 있다.
* 메뉴의 가격이 올바르지 않으면 등록할 수 없다.
    * 메뉴의 가격은 0 원 이상이어야 한다.
    * 메뉴에 속한 상품 금액의 합은 메뉴의 가격보다 크거나 같아야 한다.
* 메뉴는 특정 메뉴 그룹에 속해야 한다.
* 메뉴의 목록을 조회할 수 있다.

### 테이블

* 테이블을 등록할 수 있다.
* 테이블의 목록을 조회할 수 있다.
* 빈 테이블 설정 또는 해지할 수 있다.
* 단체 지정된 테이블은 빈 테이블 설정 또는 해지할 수 없다.
* 주문 상태가 조리 또는 식사인 테이블은 빈 테이블 설정 또는 해지할 수 없다.
* 방문한 손님 수를 입력할 수 있다.
* 방문한 손님 수가 올바르지 않으면 입력할 수 없다.
    * 방문한 손님 수는 0 명 이상이어야 한다.
* 빈 테이블은 방문한 손님 수를 입력할 수 없다.

### 단체 지정

* 2 개 이상의 빈 테이블을 단체로 지정할 수 있다.
* 단체 지정은 중복될 수 없다.
* 단체 지정을 해지할 수 있다.
* 단체 지정된 테이블의 주문 상태가 조리 또는 식사인 경우 단체 지정을 해지할 수 없다.

### 주문

* 1 개 이상의 등록된 메뉴로 주문을 등록할 수 있다.
* 빈 테이블에는 주문을 등록할 수 없다.
* 주문의 목록을 조회할 수 있다.
* 주문 상태를 변경할 수 있다.
* 주문 상태가 계산 완료인 경우 변경할 수 없다.

## 용어 사전

| 한글명 | 영문명 | 설명 |
| --- | --- | --- |
| 단체 주문 테이블 | TableGroup | 2개 이상으로 구성 된 주문 테이블들의 집합을 말한다. 단체 주문 테이블은 각 주문 테이블들의 주문한 모든 메뉴가 모두 식사완료 상태로 바뀌었을 때 단체지정을 해제 할 수 있다. |
| 주문 테이블 | Table | 하나의 테이블을 말하며 손님의 수 정보와 이용가능 상태를 가진다. 주문 테이블의 등록 된 모든 주문이 식사완료 상태에 도달한 경우, 주문 테이블은 이용가능 상태를 가진다. 이용가능 상태가 아닌 주문 테이블의 손님 수는 변경될 수 있으며, 1명 이상이어야 한다. |
| 메뉴 그룹 | MenuGroup | 같은 범주에 속하는 메뉴들로 구성 된 여러 메뉴들의 묶음을 말한다. (중식, 일식 / 요리부, 식사부 등) |
| 메뉴 | Menu | 메뉴는 이름과 가격을 가지며 메뉴 상품들의 조합으로 구성돼있다. |
| 메뉴 상품 | MenuProduct | 메뉴를 조합하는 상품을 뜻하며 수량 정보를 가진다. |
| 상품 | Product | 상품은 이름과 가격을 가지며 메뉴 상품으로 쓰일 수 있다. |
| 주문 | Order | 주문 테이블의 손님은 주문을 할 수 있다. 주문은 주문메뉴를 가지며, 주문메뉴에는 이미 등록 된 메뉴만 포함될 수 있다. 주문은 주문상태라는 이름으로 현재 주문의 상태를 가지며, 최초 조리중 상태로 등록된다. (조리중, 식사중, 식사완료) |
| 주문 항목 | OrderLineItems | 손님이 주문한 메뉴들을 의미하며 각 메뉴마다 수량 정보를 가진다. |
| 주문 상태 | OrderStatus | 주문의 현재 상태를 말한다. (조리중, 식사중, 식사완료) |
| 조리중 | COOKING | 주문이 조리 중인 상태 |
| 식사중 | MEAL | 주문의 식사가 진행되고 있는 상태 |
| 식사완료 | COMPLETION | 주문의 조리 및 식사가 완료 된 상태 |

## 모델링

#### 상품 Context

* 상품(Product)
    * 상품 ID, 상품 명, 상품 가격으로 구성된다.
    * 상품을 등록한다.
        * 상품 가격을 검증한다. (0원 이상)
    * 상품의 목록을 조회한다.
    
---

#### 메뉴 Context

* 메뉴(Menu)
    * 메뉴 번호, 메뉴 명, 메뉴 가격, 메뉴 그룹(MenuGroup) 번호, 메뉴 상품(MenuProduct) 리스트로 구성된다.
    * 메뉴를 등록한다.
        * 메뉴 가격을 검증한다. (0원 이상)
        * 메뉴 그룹 번호를 검증한다. (메뉴 그룹 번호를 이용하여 존재하는지 검증)
        * 메뉴 상품 리스트를 검증한다. (`메뉴 상품`의 `상품 번호`를 이용하여 존재하는지 검증)
        * 메뉴 가격을 검증한다. (각 `메뉴 상품`이 가지는 `상품 번호`로 조회한 `상품(Product)`의 `상품 가격`과 `메뉴 상품(MenuProduct)`의 `수량`을 곱한 값들의 합보다 작아야 한다.)
        * 메뉴가 등록되면, `메뉴 상품` 리스트에 생성 된 `메뉴 번호`를 저장한다.
    * 메뉴의 목록을 조회한다.
        * 메뉴 리스트를 가져온다.
        
* 메뉴 그룹(MenuGroup)
    * 메뉴 그룹 번호, 메뉴 그룹 명으로 구성된다.
    * 메뉴 그룹을 등록한다.
    * 메뉴 그룹의 목록을 조회한다.
    
* 메뉴 상품(MenuProduct)
    * 메뉴 상품 번호, 메뉴(Menu) 번호, 상품(Product) 번호, 수량으로 구성된다.
    
---

#### 주문 Context

* 주문(Order)
    * 주문 번호, 주문 테이블 번호, 주문 상태(OrderStatus), 주문 시간, 주문 항목(OrderLineItem) 리스트로 구성된다.
    * 주문을 등록한다.
        * 주문항목 리스트를 검증한다. (주문항목 리스트가 비어있는지 검증)
        * 주문항목 리스트를 검증한다. (각 주문항목의 `메뉴 번호`를 이용하여 존재하는 `메뉴`인지 검증)
        * 주문 테이블을 검증한다. (주문 테이블 번호를 이용하여 존재하는지 검증)
        * 주문 테이블을 검증한다. (주문 테이블이 비어있는지 검증)
        * 최초 주문 상태는 조리중 상태이며, 주문 시간은 주문을 등록한 시점이 된다.
        * 주문이 등록되면, `주문항목` 리스트에 생성 된 `주문 번호`를 저장한다.
    * 주문의 목록을 조회한다.
    * 주문 상태를 변경한다.
        * 주문을 검증한다. (주문 번호를 이용하여 존재하는지 검증)
        * 주문을 검증한다. (주문 상태가 식사완료 상태인지 검증)

* 주문 테이블(OrderTable)
    * 주문 테이블 번호, 단체 주문 테이블 번호, 손님 수, 주문 테이블이 비어있는지 여부로 구성된다.
    * 주문 테이블을 등록한다.
        * 주문 테이블 번호, 단체 주문 테이블 번호의 정보를 삭제하고 등록한다.
    * 주문 테이블의 목록을 조회한다.
    * 주문 테이블을 이용가능 상태로 변경한다.
        * 주문 테이블을 검증한다. (주문 테이블 번호를 이용하여 존재하는지 검증)
        * 주문 테이블을 검증한다. (주문 테이블이 이미 단체 주문 테이블로 지정돼있는지 검증)
        * 주문 상태를 검증한다. (주문 테이블 번호를 이용하여, 해당 주문 테이블의 `주문`을 가져와 `주문 상태`가 조리중이거나 식사중인지 검증)
    * 주문 테이블의 손님 수를 변경한다.
        * 손님 수를 검증한다. (0명 이상)
        * 주문 테이블을 검증한다. (주문 테이블 번호를 이용하여 존재하는지 검증)
        * 주문 테이블을 검증한다. (주문 테이블이 비어있는지 검증)

* 단체 주문 테이블(TableGroup)
    * 단체 주문 테이블 번호, 단체 지정 시간, 주문 테이블 리스트로 구성된다.
    * 단체 주문 테이블을 지정한다.
        * 주문 테이블 리스트를 검증한다. (2개 이상)
        * 주문 테이블 리스트를 검증한다. (각 주문 테이블 번호를 이용하여 존재하는 주문테이블인지 검증)        
        * 주문 테이블 리스트를 검증한다. (각 주문 테이블의 단체 주문 테이블 번호를 이용하여 단체 지정되지 않은 테이블인지 검증)
        * 단체 지정 시간은 단체 주문 테이블이 등록되는 시점이 된다.
        * 단체 주문 테이블이 등록되면, `주문 테이블`에 `단체 주문 테이블 번호`를 담고 `비어있는 상태`로 저장한다.
    * 단체 주문 테이블 지정을 해제한다.
        * 주문 테이블 리스트를 검증한다. (각 주문 테이블의 주문 상태가 조리중이거나 식사중인지 검증)
        * 단체 주문 테이블 지정이 해제되면, `주문 테이블`의 `단체 주문 테이블 번호`를 삭제한다.
